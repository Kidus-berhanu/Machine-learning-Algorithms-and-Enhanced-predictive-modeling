import nltk
from nltk.chat import eliza
from nltk.classify import NaiveBayesClassifier

# Define the training data
#we are going to intgrete this code with the final training data this is just a sample dataset
training_data = [("Apple", "apples are red"),
                 ("Banana", " banna a yellow fruit"),
                 ("Mango", "yellow fruit or green"),
                 ("Watermelon", "green fruit"),
                 ("Carrot", " orange vegetable"),
                 ("Potato", "light brown vegetable"),
                 ("Onion", " red vegetable"),
                 ("Tomato", " shiny red vegetable")]

# Define the features function
def extract_features(word):
    return {"word": word}

# Create the classifier
classifier = NaiveBayesClassifier.train([(extract_features(n), category) for (n, category) in training_data])

# Define the conversation function
def conversation(input_text):
    # Use the Eliza chatbot to respond to the input
    response = eliza.respond(input_text)
    print("Chatbot: " + response)

# Define the fruit classification function
def classify_fruit(input_text):
    fruit_name = input_text.split(" ")[-1]
    fruit_class = classifier.classify(extract_features(fruit_name))
    print("Chatbot: The "+fruit_name+" is "+fruit_class)

# Define the main function that routes the user's input to the correct function
def chatbot(input_text):
    input_text = input_text.lower()
    if "fruit" in input_text:
        classify_fruit(input_text)
    else:
        conversation(input_text)

# Use the chatbot
print("Chatbot: Hello, how can I help you today?")
while True:
    user_input = input("You: ")
    chatbot(user_input)
